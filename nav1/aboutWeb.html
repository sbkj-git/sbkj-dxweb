<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>网站概况</title>
    <link rel="stylesheet" href="../css/public.css">
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/setting.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" type="text/css" media="all" href="../js/date/css/daterangepicker.css"/>
    <link rel="stylesheet" type="text/css" href="http://www.jq22.com/jquery/font-awesome.4.6.0.css">
    <link rel="stylesheet" type="text/css" href="../css/buind.css">
    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/echarts.js"></script>
    <script src="../js/date/js/moment.js"></script>
    <script src="../js/date/js/daterangepicker.js"></script>

</head>
<body style="background-color:#f3f3f3;width: inherit;box-sizing: border-box;">
<div class="brand" style="background-color:#fff!important;height:135px;margin-bottom: 50px;">
    <ul class="breadcrumb" style="font-size: 14px;margin:25px 0;">
        <li><a href="#" class="text1" style="color: #959595">统计/</a></li>
        <li><a href="#" class="text2" style="color: #959595">网站概况</a></li>
        <br/>
        <h1 style="width:100%;margin-top:25px;">网站概况</h1>
    </ul>
</div>
<div style="width:100%;">
    <!--<div style="background-color:#fff;margin-bottom: 50px;height:200px;">-->
    <!--<div class="form-group flex"-->
    <!--style="width: 100%;justify-content: space-between;border-bottom: 1px dashed #D4D4D4;line-height: 100px;box-sizing: border-box;padding: 0 100px 0 30px;height: 100px;">-->
    <!--<div class="flex" style="width:50%">-->
    <!--<div class="text-center">-->
    <!--<span style="line-height: 2;">快速查看:</span>-->
    <!--</div>-->
    <!--<div class="text-center">-->
    <!--<button class="btn btnClick1">今日</button>-->
    <!--</div>-->
    <!--<div class="text-center">-->
    <!--<button class="btn btnClick2">昨日</button>-->
    <!--</div>-->
    <!--<div class="text-center">-->
    <!--<button class="btn btn-primary btnClick3">最近7日</button>-->
    <!--</div>-->
    <!--<div class="text-center">-->
    <!--<button class="btn btnClick4">最近30日</button>-->
    <!--</div>-->
    <!--</div>-->
    <!--<div class="col-sm-1" style="text-align: center;float: right;">-->
    <!--&lt;!&ndash;<span style="font-size:14px;color:#FF5456;">收起</span>&ndash;&gt;-->
    <!--</div>-->
    <!--</div>-->
    <!--<div class="col-sm-5 flex"-->
    <!--style="line-height: 100px;box-sizing: border-box;padding: 0 100px 0 30px;height:100px">-->
    <!--<label for="name" class="control-label col-sm-3"-->
    <!--style="text-align: left;line-height: 2;padding: 0;margin:0">选择日期:</label>-->
    <!--<div class=" col-sm-8">-->
    <!--<div class="position" style="height:40px;">-->
    <!--<input type="text" class="form-control dateChange" id="startAndEnd"-->
    <!--style="height:inherit;width: 120%"/>-->
    <!--<span style="font-family: iconfont;position: absolute;right: -15%;top:-30px;font-size: 24px;"-->
    <!--id="datetimepicker1">&#xe73a;</span>-->
    <!--</div>-->

    <!--</div>-->
    <!--</div>-->
    <!--</div>-->
    <ul class="flex justify" style="width:100%;box-sizing: border-box;padding:0 70px;">
        <li class="li33 flex" style="height:155.8px;">
            <div class="bag1 w36 flex column" style="justify-content: center;height:155.8px;">
                <img src="../image/pv.png" alt=""
                     style="width: 70px;height: 70px;position: absolute;margin-left: 30px;margin-top: -23px;">
                <p style="color: #fff;font-size: 18px;text-align: center;position: absolute;margin-left: 20px;margin-top: 36px">
                    浏览次数PV</p>
            </div>
            <div class="flex column" style="padding:40px 0;width: 64%;box-sizing: border-box;text-align: left">
                <p class="data" style="font-size: 22px">今日&nbsp;&nbsp;&nbsp;<span style="color:#0f0f0f;font-size: 22px"
                                                                                  class="visitPV">0</span></p>
                <!--<p class="data" style="font-size: 18px;color: #9ea7b3">累计:&nbsp;&nbsp;<span style="font-size: 18px;color: #9ea7b3" class="countPV">0</span></p>-->
                <!--</div>-->
        </li>
        <li class="li33 flex" style="height:155.8px;">
            <div class="bag2 w36 flex column" style="justify-content: center;height:155.8px;">
                <img src="../image/uv.png" alt=""
                     style="width: 70px;height: 70px;position: absolute;margin-left: 30px;margin-top: -16px;">
                <p style="color: #fff;font-size: 18px;text-align: center;position: absolute;margin-left: 20px;margin-top: 40px">
                    独立访客UV</p>
            </div>
            <div class="flex column" style="padding:40px 0; text-align: left">
                <p class="data" style="font-size: 22px">今日&nbsp;&nbsp;&nbsp;<span style="color:#0f0f0f;font-size: 22px"
                                                                                  class="visitUV">0</span></p>
                <!--<p class="data" style="font-size: 18px;color: #9ea7b3">累计:&nbsp;&nbsp;<span style="font-size: 18px;color: #9ea7b3" class="countUV">0</span></p>-->
            </div>
        </li>
        <li class="li33 flex" style="height:155.8px;">
            <div class="bag3 w36 flex column" style="justify-content: center;height:155.8px;">
                <img src="../image/ip.png" alt=""
                     style="width: 70px;height: 70px;position: absolute;margin-left: 30px;margin-top: -19px;">
                <p style="color: #fff;font-size: 18px;text-align: center;position: absolute;margin-left: 55px;margin-top: 40px">
                    IP</p>
            </div>
            <div class="flex column" style="padding:40px 0;text-align: left ">
                <p class="data" style="font-size: 22px">今日&nbsp;&nbsp;&nbsp;<span style="color:#0f0f0f;font-size: 22px"
                                                                                  class="visitIP">0</span></p>
                <!--<p class="data" style="font-size: 18px;color: #9ea7b3">累计:&nbsp;&nbsp;<span style="font-size: 18px;color: #9ea7b3" class="countIP">0</span></p>-->
            </div>
        </li>
    </ul>
    <div class="mainBox">
        <div id="main"></div>
    </div>
    <!--<div class="flex" style="width:100%;padding: 50px 70px;box-sizing: border-box;">-->
    <!--<dl class="flex column www">-->
    <!--&lt;!&ndash; <img src="../image/u923.png" alt="" class="nextImg"> &ndash;&gt;-->
    <!--<dt style="width:100%;font-size: 16px;"> Top10来源网站</dt>-->
    <!--<div class="flex justify margin30" style="width:100%;font-size: 14px;">-->
    <!--<span>来源网站</span>-->
    <!--<span> <i>浏览量(PV)</i>&nbsp;&nbsp;<i>占比</i></span>-->
    <!--</div>-->
    <!--<dd class="flex justify ED6264">-->
    <!--<span class="FF5456">http:baidu.com</span>-->
    <!--<span>-->
    <!--<i>5</i>-->
    <!--&nbsp;&nbsp;-->
    <!--<i>50%</i>-->
    <!--</span>-->
    <!--</dd>-->
    <!--<dd class="flex justify ED6264">-->
    <!--<span class="FF5456">http:baidu.com</span>-->
    <!--<span>-->
    <!--<i>5</i>-->
    <!--&nbsp;&nbsp;-->
    <!--<i>50%</i>-->
    <!--</span>-->
    <!--</dd>-->
    <!--<dd class="flex justify ED6264">-->
    <!--<span class="FF5456">http:baidu.com</span>-->
    <!--<span>-->
    <!--<i>5</i>-->
    <!--&nbsp;&nbsp;-->
    <!--<i>50%</i>-->
    <!--</span>-->
    <!--</dd>-->
    <!--</dl>-->
    <!--<dl class="flex column www">-->
    <!--&lt;!&ndash; <img src="../image/u923.png" alt="" class="nextImg"> &ndash;&gt;-->
    <!--<dt style="width:100%;font-size: 16px;"> Top10来源网站</dt>-->
    <!--<div class="flex justify margin30" style="width:100%;font-size: 14px;">-->
    <!--<span>来源网站</span>-->
    <!--<span> <i>浏览量(PV)</i>&nbsp;&nbsp;<i>占比</i>-->
    <!--</div>-->
    <!--<dd class="flex justify ED6264">-->
    <!--<span class="FF5456">http:baidu.com</span>-->
    <!--<span>-->
    <!--<i>5</i>-->
    <!--&nbsp;&nbsp;-->
    <!--<i>50%</i>-->
    <!--</span>-->
    <!--</dd>-->
    <!--<dd class="flex justify ED6264">-->
    <!--<span class="FF5456">http:baidu.com</span>-->
    <!--<span>-->
    <!--<i>5</i>-->
    <!--&nbsp;&nbsp;-->
    <!--<i>50%</i>-->
    <!--</span>-->
    <!--</dd>-->
    <!--<dd class="flex justify ED6264">-->
    <!--<span class="FF5456">http:baidu.com</span>-->
    <!--<span>-->
    <!--<i>5</i>-->
    <!--&nbsp;&nbsp;-->
    <!--<i>50%</i>-->
    <!--</span>-->
    <!--</dd>-->
    <!--</dl>-->
    <!--</div>-->
    <!--<div class="flex justify" style="width:100%;padding: 0 70px;box-sizing: border-box;">-->
    <!--<dl class="flex column"-->
    <!--style="width:47%;position: relative;background-color: #fff;box-sizing: border-box;padding:55px 30px;">-->
    <!--<p>新老访客</p>-->
    <!--<ul class="flex justify" style="width:100%;">-->
    <!--<li style="width:33%;text-align: center;"><img src="../image/u994.png" alt=""-->
    <!--style="width:70px;height:70px;"></li>-->
    <!--<li style="width:33%;text-align: center;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;">-->
    <!--<span class="custor">新访客</span>-->
    <!--<span style="color:#7DDA97;font-size:20px;">0%</span></li>-->
    <!--<li style="width:33%;text-align: center;"><span class="custor">老访客</span>-->
    <!--<span style="color:#51A8F9;font-size:18px;">100%</span></li>-->
    <!--</ul>-->
    <!--<table class="table table-bordered">-->

    <!--<tbody style="text-align: center;">-->
    <!--<tr>-->
    <!--<td>浏览量</td>-->
    <!--<td>&#45;&#45;</td>-->
    <!--<td>1</td>-->
    <!--</tr>-->
    <!--<tr>-->
    <!--<td>访客数</td>-->
    <!--<td>&#45;&#45;</td>-->
    <!--<td>1</td>-->
    <!--</tr>-->
    <!--<tr>-->
    <!--<td>平均访问时长</td>-->
    <!--<td>&#45;&#45;</td>-->
    <!--<td>00.02</td>-->
    <!--</tr>-->
    <!--<tr>-->
    <!--<td>平均访问页数</td>-->
    <!--<td>&#45;&#45;</td>-->
    <!--<td>1</td>-->
    <!--</tr>-->
    <!--</tbody>-->
    <!--</table>-->
    <!--</dl>-->
    <!--<dl class="flex column"-->
    <!--style="width:47%;position: relative;background-color: #fff;box-sizing: border-box;padding:55px 30px;">-->
    <!--<p>地区分布</p>-->
    <!--</dl>-->
    <!--</div>-->
    <!--</div>-->

    <footer class="footer">
        <p>Copyright 2017 东信在线门户运营后台 All Right Reserved 中国—东盟信息港股份有限公司北京分公司
        </p>
        <p>增值电信业务经营许可证：B2-20180289 涉密信息系统集成许可证：JC301700083</p>

        <p>桂ICP备16005301号-7 桂公网安备45010802000099号</p>
    </footer>
</body>
</html>
<script src="../js/MD5.js"></script>
<script src="../js/sign.js"></script>
<script src="../js/api.js"></script>
<script src="../js/getRequest.js"></script>
<script src="../js/count/aboutWeb.js"></script>
<script type="text/javascript">
    function changeState(el) {
        if (el.readOnly) el.checked = el.readOnly = false;
        else if (!el.checked) el.readOnly = el.indeterminate = true;
    }


    // 开始时间和结束时间日历插件
    $('#startAndEnd').daterangepicker({
        "showWeekNumbers": true,
        "showISOWeekNumbers": true,
        "timePicker": true,
        "timePickerSeconds": true,
        "locale": {
            "direction": "ltr",
            "format": "YYYY-MM-DD HH:mm:ss",
            "separator": " ~ ",
            "applyLabel": "确定",
            "cancelLabel": "取消",
            "fromLabel": "From",
            "toLabel": "To",
            "customRangeLabel": "Custom",
            "daysOfWeek": [
                "日",
                "一",
                "二",
                "三",
                "四",
                "五",
                "六"
            ],
            "monthNames": [
                "一月",
                "二月",
                "三月",
                "四月",
                "五月",
                "六月",
                "七月",
                "八月",
                "九月",
                "十月",
                "十一月",
                "十二月"
            ],
            "firstDay": 1
        },
// "startDate": "04-11-2019",
// "endDate": "04-11-2019"
    }, function (start, end, label) {
        var starttime = start.format('YYYY-MM-DD HH:mm:ss');
        var endTime = end.format('YYYY-MM-DD HH:mm:ss');
        var url = src + "/bannerGetInterface.dx";
        var appsercet = window.localStorage.getItem("appsercet");
        appsercet = JSON.parse(appsercet);
        newAppsercet = appsercet.data;
        par = "appsercet=" + newAppsercet + "&method=get.dxWeb.webSurvey&starttime=" + starttime + "&erdtime=" + endTime;
        var bannerList = getSign(url, par);
        if (bannerList.msg && bannerList.msg.code == "10") {
            $(".bannerList").html("");
            $("#startAndEnd").val("");
        } else {
            bannerList1(bannerList);
            firstRender();
            $("#startAndEnd").val("");
        }
        console.log(start.format('YYYY-MM-DD '));
        console.log(end.format('YYYY-MM-DD '));
// console.log("New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')");
    });

</script>
<script type="text/javascript">
    // 获取data数据中的时间
    function getDate(data) {
        var dates = new Array();
        var pvs = new Array();
        var uvs = new Array();
        var ips = new Array();
        var result = new Array();
        var pvList = data.pvList;
        for (var i = 0; i < pvList.length; i++) {
            dates.push(pvList[i].datetime);
            pvs.push(pvList[i].pv);
            uvs.push(pvList[i].uv);
            ips.push(pvList[i].ip);
        }
        result.push(dates, pvs, uvs, ips);

        return result;
    }

    $(".visitPV").text(data.msg.pv);
    $(".visitUV").text(data.msg.uv);
    $(".visitIP").text(data.msg.ip);
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('main'));
    // 指定图表的配置项和数据
    // app.title = '多 X 轴示例';
    var colors = ['#5793f3', '#d14a61', '#675bba'];
    option = {
        color: colors,

        tooltip: {
            trigger: 'none',
            axisPointer: {
                type: 'cross'
            }
        },
        legend: {
            data: ['PV', 'UV', 'IP']
        },
        grid: {
            top: 70,
            bottom: 50
        },
        xAxis: [
            {
                type: 'category',
                axisTick: {
                    alignWithLabel: true
                },
                axisLine: {
                    onZero: false,
                    lineStyle: {
                        color: colors[1]
                    }
                },
                axisPointer: {
                    label: {
                        formatter: function (params) {
                            return '降水量  ' + params.value
                                + (params.seriesData.length ? '：' + params.seriesData[0].data : '');
                        }
                    }
                },
                data: getDate(data)[0]
            },
            {
                type: 'category',
                axisTick:
                    {
                        alignWithLabel: true
                    }
                ,
                axisLine: {
                    onZero: false,
                    lineStyle:
                        {
                            color: colors[0]
                        }
                }
                ,
                axisPointer: {
                    label: {
                        formatter: function (params) {
                            return '降水量  ' + params.value
                                + (params.seriesData.length ? '：' + params.seriesData[0].data : '');
                        }
                    }
                }
                ,
                data: getDate(data)[0]
            }
            ,
            {
                type: 'category',
                axisTick:
                    {
                        alignWithLabel: true
                    }
                ,
                axisLine: {
                    onZero: false,
                    lineStyle:
                        {
                            color: colors[2]
                        }
                }
                ,
                axisPointer: {
                    label: {
                        formatter: function (params) {
                            return '降水量  ' + params.value
                                + (params.seriesData.length ? '：' + params.seriesData[0].data : '');
                        }
                    }
                }
                ,
                data: getDate(data)[0]
            }
        ],
        yAxis: [
            {
                type: 'value'
            }
        ],
        series:
            [
                {
                    name: 'PV',
                    type: 'line',
                    xAxisIndex: 1,
                    smooth: true,
                    data: getDate(data)[1]
                },
                {
                    name: 'UV',
                    type: 'line',
                    smooth: true,
                    data: getDate(data)[2]
                },
                {
                    name: 'IP',
                    type: 'line',
                    smooth: true,
                    data: getDate(data)[3]
                }
            ]
    }
    ;
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
</script>

<script>

    option = {
        title: {
            text: '2011全国GDP（亿元）',
            subtext: '数据来自国家统计局'
        },
        tooltip: {
            trigger: 'item'
        },
        legend: {
            x: 'right',
            selectedMode: false,
            data: ['北京', '上海', '广东']
        },
        dataRange: {
            orient: 'horizontal',
            min: 0,
            max: 55000,
            text: ['高', '低'],           // 文本，默认为数值文本
            splitNumber: 0
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            x: 'right',
            y: 'center',
            feature: {
                mark: {show: true},
                dataView: {show: true, readOnly: false}
            }
        },
        series: [
            {
                name: '2011全国GDP分布',
                type: 'map',
                mapType: 'china',
                mapLocation: {
                    x: 'left'
                },
                selectedMode: 'multiple',
                itemStyle: {
                    normal: {label: {show: true}},
                    emphasis: {label: {show: true}}
                },
                data: [
                    {name: '西藏', value: 605.83},
                    {name: '青海', value: 1670.44},
                    {name: '宁夏', value: 2102.21},
                    {name: '海南', value: 2522.66},
                    {name: '甘肃', value: 5020.37},
                    {name: '贵州', value: 5701.84},
                    {name: '新疆', value: 6610.05},
                    {name: '云南', value: 8893.12},
                    {name: '重庆', value: 10011.37},
                    {name: '吉林', value: 10568.83},
                    {name: '山西', value: 11237.55},
                    {name: '天津', value: 11307.28},
                    {name: '江西', value: 11702.82},
                    {name: '广西', value: 11720.87},
                    {name: '陕西', value: 12512.3},
                    {name: '黑龙江', value: 12582},
                    {name: '内蒙古', value: 14359.88},
                    {name: '安徽', value: 15300.65},
                    {name: '北京', value: 16251.93, selected: true},
                    {name: '福建', value: 17560.18},
                    {name: '上海', value: 19195.69, selected: true},
                    {name: '湖北', value: 19632.26},
                    {name: '湖南', value: 19669.56},
                    {name: '四川', value: 21026.68},
                    {name: '辽宁', value: 22226.7},
                    {name: '河北', value: 24515.76},
                    {name: '河南', value: 26931.03},
                    {name: '浙江', value: 32318.85},
                    {name: '山东', value: 45361.85},
                    {name: '江苏', value: 49110.27},
                    {name: '广东', value: 53210.28, selected: true}
                ]
            },
            {
                name: '2011全国GDP对比',
                type: 'pie',
                roseType: 'area',
                tooltip: {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                center: [document.getElementById('main1').offsetWidth - 250, 225],
                radius: [30, 120],
                data: [
                    {name: '北京', value: 16251.93},
                    {name: '上海', value: 19195.69},
                    {name: '广东', value: 53210.28}
                ]
            }
        ],
        animation: false
    };
    var ecConfig = require('echarts/config');
    myChart.on(ecConfig.EVENT.MAP_SELECTED, function (param) {
        var selected = param.selected;
        var mapSeries = option.series[0];
        var data = [];
        var legendData = [];
        var name;
        for (var p = 0, len = mapSeries.data.length; p < len; p++) {
            name = mapSeries.data[p].name;
            //mapSeries.data[p].selected = selected[name];
            if (selected[name]) {
                data.push({
                    name: name,
                    value: mapSeries.data[p].value
                });
                legendData.push(name);
            }
        }
        option.legend.data = legendData;
        option.series[1].data = data;
        myChart.setOption(option, true);
    });
</script>
