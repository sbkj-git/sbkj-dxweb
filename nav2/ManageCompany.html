<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>管理合作伙伴</title>
    <link rel="stylesheet" href="../css/public.css">
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/setting.css">
    <link rel="stylesheet" href="../css/index.css">
<link rel="stylesheet" type="text/css" href="http://www.jq22.com/jquery/font-awesome.4.6.0.css">
<link rel="stylesheet" type="text/css" href="../css/buind.css">
<script src="../js/jquery-1.10.2.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<style>
.table th, .table td{vertical-align: middle;}
/*.isLook{display: none;}*/
.inp{
    float: right;
}
    .files{
        width: 200px;
    }
/*复选框开关按钮切换特效*/
.switch_box{
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    max-width: 50px;
    min-width: 80px;
    -webkit-box-pack: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    -webkit-box-flex: 1;
    -ms-flex: 1;
    flex: 1;
}
input[type="checkbox"].switch_1{
    font-size: 30px;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    width: 3.5em;
    height: 1.3em;
    background: #ddd;
    border-radius: 3em;
    position: relative;
    cursor: pointer;
    outline: none;
    -webkit-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
}
input[type="checkbox"].switch_1:checked{
    background: #0ebeff;
}
input[type="checkbox"].switch_1:after{
    position: absolute;
    content: "";
    width: 1.5em;
    height: 1.3em;
    border-radius: 50%;
    background: #fff;
    -webkit-box-shadow: 0 0 .25em rgba(0,0,0,.3);
    box-shadow: 0 0 .25em rgba(0,0,0,.3);
    -webkit-transform: scale(.7);
    transform: scale(.7);
    left: 0;
    -webkit-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
}
input[type="checkbox"].switch_1:checked:after{
    left: calc(100% - 1.3em);
}
</style>
</head>
<body style="background-color:#f3f3f3;width: inherit;box-sizing: border-box;">
<div class="brand" style="background-color:#fff!important;height:135px;margin-bottom: 50px;">
            <ul class="breadcrumb" style="font-size: 14px;margin:25px 0;">
            <li><a href="#" style="color:#8D8D8D;">网站运营</a>&nbsp;/&nbsp;</li>
            <li><a href="#" style="color:#5A5A5A;">管理合作伙伴</a></li>
        </ul>
        <h1>管理合作伙伴</h1>
    </div>
   <div class="" style="margin-top:50px;padding: 0 70px;width: 100%;box-sizing: border-box;">
    <div style="width: 100%;background-color: #fff;padding:40px 20px;box-sizing: border-box;">
        <div class="form-group flex justify" style="padding-bottom: 2%;background-color: #fff;">
            <h4>管理合作伙伴</h4>
            <div class="addInput btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter" style="color:#000;background: #fff">+添加</div>
            <!--弹窗开始-->
            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content" style="margin-top: 10rem">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">添加合作伙伴</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <!--合作伙伴名称-->
                            <div class="form-group  flex">
                                <label class="control-label col-sm-3  lh15" >合作伙伴名称:</label>
                                <div class="col-sm-9 inp">
                                    <input type="text" class="inp form-control bannerName" placeholder=" 请输入合作伙伴名称"/>
                                </div>
                            </div>
                            <!--合作伙伴类型-->
                            <div class="form-group  flex">
                                <label class="control-label col-sm-3  lh15" >合作伙伴类型:</label>
                                <div class="col-sm-9 inp">
                                    <select class="form-control location">
                                        <option checked>全部</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group  flex">
                                <label class="control-label col-sm-3  lh15" >上传Banner图:</label>
                                <div class="col-sm-9 inp">
                                    <input type="file" class="files form-control bannerName" placeholder=" 上传文件"/>
                                    <p>支持扩展名:.jpg  .png</p>
                                </div>
                            </div>
                            <div class="form-group  flex">
                                <label class="control-label col-sm-3  lh15" >上线:</label>
                                <div class="col-sm-9 inp">

                                    <div class="wrapper">
                                        <div class="switch_box box_1">
                                            <input type="checkbox" class="switch_1">
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal" style="color: black">取消</button>
                            <button type="button" class="btn btn-primary">确定</button>
                        </div>
                    </div>
                </div>
            </div>
            <!--弹窗结束-->
        </div>
        <table class="table" style="width: 100%;overflow: hidden;">
            <thead style="background-color: #F3F3F3;border: 1px solid #CCCCCC;">
                <tr style="border-bottom: 1px solid #d8d8d8;">
                    <td class="position">
                        <div class="radio radio-info radio-inline">
                            <input type="radio" id="m1" value="option1" name="radioInline" checked="">
                            <label for="m1"> LOGO图片 </label>
                        </div>
                    </td>
                    <td>合作伙伴名称</td>
                    <td>合作伙伴类型</td>
                    <td>合作伙伴连接</td>
                    <td>上线/下线</td>
                    <td>点击次数</td>
                    <td style="font-weight: 600;">操作</td>
                </tr>
            </thead>
            <tbody class="textList">
                <tr style="border-bottom: 1px solid #d8d8d8;">
                    <td>
                        <div class="checkbox checkbox-primary">
                            <input type="checkbox" class="styled styled-primary" id="singleCheckbox3" value="option2"
                                checked="false" aria-label="Single checkbox Two">
                            <label for="singleCheckbox3">这是文章名称</label>
                        </div>
                    </td>
                    <td><img src="../image/u2382.png" alt="" style="width: 82px;height:56px;display: table-column;vertical-align: middle;"></td>
                    <td>路人甲</td>
                    <td>&#10005; &#10007;</td>
                    <td>2019-02-20 11:40:08</td>
                    <td style="color:#FF5456;"><span class="b1">编辑</span>&nbsp;<span class="b1">删除</span></td>
                </tr>
            </tbody>
        </table>
        <div class="paging flex justify">
            <div style="color:#929292;font-size: 14px;padding-left: 20px;">
                共<span>400</span>条数据&nbsp;第<span>1</span>/<span>80</span>页</div>
            <div style="width:50%;">
                <ul class="pageList flex " style="width:auto;justify-content: flex-end;">
                    <li>&lt;</li>
                    <li class="colorActive">1</li>
                    <li>2</li>
                    <li>3</li>
                    <li>4</li>
                    <li>5</li>
                    <li>&gt;</li>
                    <li>10条/页</li>
                    <li>跳至<input type="number" class="btn" style="width:50px;height:30px;border-radius:5px;">页</li>
                </ul>
            </div>
        </div>
    </div> 
   </div>

   <footer class="footer">
        <p>Copyright 2017 中国东信云通信平台 All Right Reserved 中国—东盟信息港股份有限公司北京分公司
         </p>
        <p>增值电信业务经营许可证：B2-20180289 涉密信息系统集成许可证：JC301700083</p>
         
         <p>桂ICP备16005301号-7 桂公网安备45010802000099号</p>
    </footer>
</body>
</html>
<script src="../js/jquery-1.10.2.min.js"></script>
<script src="../js/MD5.js"></script>
<script src="../js/api.js"></script>
<script src="../js/getRequest.js"></script>
<script type="text/javascript">
    function changeState(el) {
        if (el.readOnly) el.checked=el.readOnly=false;
        else if (!el.checked) el.readOnly=el.indeterminate=true;
    }
    //页面初次渲染加载数据
    var data = window.localStorage.getItem("dxRightsList");    
        data = JSON.parse(data);  
     //页面初次加载渲染页面
     var url,par;      
        var appsercet = window.localStorage.getItem("appsercet");
        appsercet = JSON.parse(appsercet);
        var newAppsercet = appsercet.data;
        //判断是否有添加管理员操作权限
        var arr = [];
        $.each(data,function(i,item){
            //console.log(item)
            if(item.id == 2){
                arr.push(item)
            }
        })
        console.log(arr[0]);
        $.each(arr[0].dxRightsList,function(i,item){
            //console.log(arr[0].dxRightsList)
            if(item.method === "get.dxWeb.webBottomList"){
                url = src+"/"+item.link_path;
                par = "appsercet="+newAppsercet+"&method="+item.method;
                
                var data = getSign(url,par);
                console.log(data);
                return;
                if(data.dxBannerList.length>0){
                    var str = "";
                    $.each(data.dxBannerList,function(i,item){
                        str+='<tr style="border-bottom: 1px solid #d8d8d8;">';
                            str+='<td><div class="checkbox checkbox-primary"><input type="checkbox" class="styled styled-primary t1" id="'+item.id+'"   aria-label="Single checkbox Two" data-id="'+item.id+'"><label for="'+item.id+'">'+item.cate_name+'</label></div></td><td><img src="'+item.small_img+'" alt="" style="width: 82px;height:56px;display: table-column;vertical-align: middle;"></td><td>'+item.author+'</td>';
                            if(item.is_ups == 1){
                                str+="<td>&#10003;</td>";
                            }else{
                                str+="<td>&#10007;</td>"
                            }
                            str+='<td>'+item.create_time+'</td><td style="color:#FF5456;"><span class="isDelete" data-id="'+item.id+'">删除</span>&nbsp;&nbsp;<span data-id="'+item.id+'" class="isLook">查看</span>&nbsp;&nbsp;<span class="isEdit" data-id="'+item.id+'">编辑</span></td>'
                        str+="</tr>";
                    })
                    $(".textList").append(str);
                }
                console.log(data);
                //判断该角色是否有权限操作
                if(item.dxRightsTwoList.length == 0){
                    return
                }
                else{
                    $.each(item.dxRightsTwoList,function(i,obj){
                       //判断该用户是否有添加权限
                        if(obj.method === "get.dxWeb.addWebBottom"){
                          $(".Add").show();
                          $(".Add").click(function(){
                           
                          })
                          
                            }
                        //判断该用户是否有删除权限 
                        if(obj.method === "get.dxWeb.deleteWebBottom"){
                            $(".Delete").show();
                            $(".isDelete").show();
                            $(".Delete").click(function(){
                                deleteText();
                            })
                            $(".isDelete").click(function(){
                                deleteText();                               
                            })  
                        }
                            //判断是否有编辑权限
                           if(obj.method === "get.dxWeb.updateWebBottom"){      
                            $(".isEdit").show();
                              $(".isEdit").click(function(){
                                  var id = $(this).attr("data-id");
                                  par = "appsercet="+newAppsercet+"&method=get.dxWeb.getWebBottom&articleId="+id;
                                var data = getSign(url,par);
                                
                                localStorage.setItem("method","get.dxWeb.updateWebBottom");
                                
                              })
                                }   
                                          
                                          
                    })
                    
                }
            }
            //删除函数封装
            function deleteText() {
                var inputs = document.querySelectorAll(".t1");//获取所有的input标签对象  
                var IdList;
                var checkboxArray = [];//初始化空数组，用来存放checkbox对象。
                for (var i = 0; i < inputs.length; i++) {
                    var obj = inputs[i];
                    if (obj.type == 'checkbox') {
                        checkboxArray.push(obj);
                    }
                }
                IdList = new Array();
                for (var i = 0; i < checkboxArray.length; i++) {
                    if (checkboxArray[i].checked) {
                        IdList.push(checkboxArray[i].getAttribute("data-id"));
                    }
                }
                par = "appsercet=" + newAppsercet + "&method=get.dxWeb.deleteWebOperation&IdList=" + IdList;
                
                var data = getSign(url, par);
                if (data.msg.code == "200") {
                    alert("删除成功");
                }
            }

        })       
</script>


